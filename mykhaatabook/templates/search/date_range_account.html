{% extends "home/layout.html" %}

{% block breadcrumb %}
 
  <li class="breadcrumb-item"><a href="{% url 'index' %}">Home</a></li>
  <li class="breadcrumb-item active" aria-current="page">Search</li>

  {% endblock %}

{% block content %}
  <h1>Result</h1>

  {% include 'partials/messages.html' %}

  {% if transactions %}

  <p>Date: {{start}}  to {{end}}</p>
  
  <table class="table table-dark table-striped table-hover">
    <thead>

      <tr>
        <th scope="col">Date</th>
        <th scope="col">Reference Number</th>
        <th scope="col">Details</th>
        <th scope="col">Credit Account</th>
        <th scope="col">Debit Account</th>
        <th scope="col">Credit</th>
        <th scope="col">Debit</th>
        <th scope="col">Balance</th>
        <th scope="col">Slip</th>
      </tr>
    </thead>
    <tbody>
      {% for trans, item in list %}

      {% if trans.transaction_date|date:"Ymd" >= start|date:"Ymd" and trans.transaction_date|date:"Ymd" <= end|date:"Ymd"  %}      
      
      
      <tr>
        <th scope="row">{{ trans.transaction_date  | date:"F d Y" }}</th>
        <td>{{ trans.refernce_number }}</td>
        <td>{{ trans.transaction_detail }}</td>
        <td>{{ trans.account }}</td>
        <td>{{ trans.bank }}</td>
        <td>
          {% if trans.transaction_type == credit  %}
          {{ trans.amount }}
          {% endif %}
        </td>
        <td class="text-danger ">
          {% if trans.transaction_type == debit  %}
          {{ trans.amount }}
          {% endif %}
        </td>

        <td>{{ item }}</td>
        <td><a style="text-decoration: none;" class="link-light" href="{{ trans.get_absolute_url }}"> 
          <div class="p-0 mb-2 bg-dark bg-gradient ">
          Slip {{trans.id}}
        </div> </a></td>

        
      </tr>
      {% endif %}
      {% endfor %}
    </tbody>

    <tfoot>
      <tr>
       
        <td colspan="5">TOTAL CREDIT/DEBIT:</td>
        <td colspan="1">{{total_credit}}</td>
        <td colspan="1" class="text-danger">{{total_debit}}</td>
        <td colspan="2"></td>
  
      </tr>
    </tfoot>
  
  
  </table>

  <a href="{% url 'export-pdf' start end %}" class="btn btn-info">
      Print
  </a>
    {% else %}

  <p>There are no transactions in the app.</p>




{% endif %} 



{% endblock %}