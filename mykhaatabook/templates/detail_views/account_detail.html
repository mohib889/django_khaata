{% extends "home/layout.html" %}
{% block breadcrumb %}

  <li class="breadcrumb-item"><a href="{% url 'index' %}">Home</a></li>
  <li class="breadcrumb-item " aria-current="page"><a href="{% url 'account' %}">All Accounts</a></li>
  <li class="breadcrumb-item active" aria-current="page">{{account.title}}</li>
  {% endblock %}
{% block content %}
  <h1>Title: {{ account.title }}</h1>
  {% include 'partials/messages.html' %}
  <div class="card text-dark bg-dark border-info mb-3" style="max-width: 35rem;">
    <div class="card body">

      <div class="row ml-2">
        <div class="col-9 gx-5">

          <p class="text-start "><strong>ID:</strong> <a href="">{{ account.id }}</a></p> 
          <p class="text-center"><strong>{{ account.title }}</strong> </p>

        </div>

        <div class="col-4">

          <p class="text-center"><strong>Title:</strong> {{ account.title }}</p>
          <p  class="text-center"><strong>Type:</strong> {{ account.book }} </p>
          <p class="text-center"><strong>Balance:</strong> {{ account.balance }}</p>

        </div>
        <div class="col-6 ">
          <p class="text-end" ><strong>Phone no:</strong> {{ account.phone_number }}</p>
          <p class="text-end"><strong>Address:</strong> {{ account.address }}</p>
          <p class="text-end"><strong>Date Created:</strong> {{ account.date_created }}</p>

        </div>
      </div>
    </div>

  </div>

  <div class="row">
    <div class="col">
      <div class="card card-body">
        <form action="{% url 'date_range_account' id %}" method="get" class="align-right">
          <div class="row">
            <div class="col" >
              <input class="form-control form-control-sm" type="date" name='start'>
            </div>

            <div class="col">
              <input  class="form-control form-control-sm" type="date" name='end'>
            </div>

            <div class="col" >
              <input class=" form-control form-control-sm btn btn-info" type="submit" name="date_range"  value="Print" id="">
            </div>
          </div>


        </form>
      </div>
    </div>
  </div>

  <div style="margin-left:20px;margin-top:20px">
    <h4>Transactions</h4>

    {% if transactions %}

  <table class="table table-dark table-striped table-hover">
    <thead>
      <tr>
        <th scope="col">Date</th>
        <th scope="col">Id</th>
        <th scope="col">Details</th>
        <th scope="col">Account</th>
        <th scope="col">Credit</th>
        <th scope="col">Debit</th>
        <th scope="col">Balance</th>
        <th scope="col">Slip</th>
      </tr>
    </thead>
    <tbody>
      
    {% for trans, item in list %}

          
        <tr>
          <th scope="row">{{ trans.transaction_date | date:"F d Y" }}</th>
          <td>{{ trans.id }}</td>
          <td>{{ trans.transaction_detail }}</td>
          <td>
            {% if trans.account ==  account %}  
                {{ trans.bank }}
            {% else %}
                {{ trans.account }}
            {% endif %}    

            </td>
          <td>
            {% if trans.account == account and trans.bank == none and trans.transaction_type == credit%}
                {{ trans.amount }}
            {% endif %}

            {% if trans.account == account and trans.bank != none %}
              {{ trans.amount }}
            {% endif %}
  
          </td>
          <td class="text-danger">
            {% if trans.account == account and trans.bank == none and trans.transaction_type == debit %}
              {{ trans.amount }}
            {% endif %}

            {% if trans.bank == account and trans.account != none %}
              {{ trans.amount }}
            {% endif %}
        </td>

        <td>{{ item }}</td>
          <td><a style="text-decoration: none;" class="link-light" href="{{ trans.get_absolute_url }}"> 
            <div class="p-0 mb-2 bg-dark bg-gradient ">
            Slip {{trans.id}}
          </div> </a></td>
  
        </tr>

    {% empty %}

    <p>No Transactions</p>    
   

    
    {% endfor %}


    {% else %}
    <p>There are no transactions in the app.</p>
  {% endif %} 
    </tbody>

  </table>
  </div> 
{% endblock %}